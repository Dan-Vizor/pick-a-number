<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<style>
		* {
			background-color: #242626;
			font-family: Arial, sans-serif;
			color: lightgray;
		}

		a {
			color: #55cadf;
		}
	</style>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pick a Number</title>
</head>

<body>
	<div id="container" style="width:100%; text-align: center">
		<div id="left" style="float:left; width: 50%;">
			<img id="LeftDice" src="images/1.png">

		</div>

		<div id="right" style="float:left; width: 50%;">
			<img id="RightDice" src="images/6.png">
		</div>
	</div>

	<h2 id="TotalDisplay" style="text-align:center; font-size: 250%;">roll the dice</h2>

	<script type="text/javascript">
		function RandomInt(min, max) { // min and max included 
			return Math.floor(Math.random() * (max - min + 1) + min);
		};

		function DiceAnimation(frames) {
			let index = 1

			const i = setInterval(() => {
				document.getElementById("LeftDice").src = "images/"+RandomInt(1,6)+".png";
				document.getElementById("RightDice").src = "images/"+RandomInt(1,6)+".png";
				if (index >= frames) {
					clearInterval(i);
				};
			}, 400);
		};

		function roll() {
			document.getElementById("ResultMessage").innerHTML = ""; //clear result message
			document.getElementById("TotalDisplay").innerHTML = "rolling..."

			let score = parseInt(document.getElementById("ScoreCounter").textContent);
			let RangeSelection = document.getElementById("range").value;
			let BetSelection = document.getElementById("bet").value;

			if (score <=0) {
				document.getElementById("TotalDisplay").innerHTML = "<p style='color:red;'>out of money</p>";
				return;
			};

			if (BetSelection > score) {
				document.getElementById("ResultMessage").innerHTML = "<p style='color:red;'>not enough money to bet that</p>";
				document.getElementById("TotalDisplay").innerHTML = "";
				return;
			};

			let LeftRoll = RandomInt(1,6);
			let RightRoll = RandomInt(1,6);
			let total = LeftRoll + RightRoll;
			// calculate win or loss
			let result = "";
			if (total <= 6 && RangeSelection == "RangeLow" || total == 7 && RangeSelection == "RangeMid" || total >= 8 && RangeSelection == "RangeHigh") {
				console.log("win");
				if (total == 7) {
					score = score + BetSelection * 3;
					result = "<p style='color:green;'>You win £"+BetSelection * 3+"</p>";

				} else {
					score = score + BetSelection * 2;
					result = "<p style='color:green;'>You win £"+BetSelection * 2+"</p>";
				};

			} else {
				console.log("loss");
				score = score - BetSelection
				result = "<p style='color:red;'>you lose -£"+BetSelection+"</p>";
			};

			// sound effect
			const audio = new Audio("DiceSound.mp3");
			audio.play();

			// dice animation
			let frame = 0
			const i = setInterval(() => {
				frame ++
				document.getElementById("LeftDice").src = "images/"+RandomInt(1,6)+".png";
				document.getElementById("RightDice").src = "images/"+RandomInt(1,6)+".png";

				if (frame >= 15) {
					document.getElementById("LeftDice").src = "images/"+LeftRoll+".png";
					document.getElementById("RightDice").src = "images/"+RightRoll+".png";
					document.getElementById("TotalDisplay").innerHTML = "<b>"+total+"</b>";
					document.getElementById("ResultMessage").innerHTML = result;
					document.getElementById("ScoreCounter").innerHTML = score;
					clearInterval(i);

					if (score <=0) {
						document.getElementById("TotalDisplay").innerHTML = "<p style='color:red;'>out of money</p>";
					};
				};
			}, 80);
		};
	</script>
</body>

<footer>
	<b>money:</b> £<span id="ScoreCounter">500</span><br><br>

	<label for="bet">bet ammount:</label>
	<select name="bet" id="bet">
		<option value="100">£100</option>
		<option value="500">£500</option>
		<option value="1000">£1000</option>
		<option value="2000">£2000</option>
	</select><br>

	<label for="range">select a range:</label>
	<select name="range" id="range">
		<option value="RangeLow">2 - 6</option>
		<option value="RangeMid">7</option>
		<option value="RangeHigh">8 - 12</option>
	</select><br>
	
	<button onclick="roll()" style="width:10%; height: 35px;"><b>roll the dice</b></button><br>

	<b><p id="ResultMessage"></p></b>
</footer>
</html>

<!--
icons from: https://game-icons.net/tags/dice.html
-->